#!/usr/bin/env node

const {
  updatePerFileCoverageExceptions,
  runPerFileCoverageTest,
} = require("../src");

switch (process.argv[2]) {
  case "--help":
  case "-h":
    console.log(`
Usage: jest-a-coverage-slip-detector [options]

Options:
  --update               Update exceptions with improved coverage levels.
                         Used to 'ratchet' up coverage after improving it.
  --force-update         Record current coverage errors as exceptions.
                         Used to set the initial per file snapshot or to force accept a future reduction in coverage.
    `);
    break;
  case "--force":
  case "--force-update":
    updatePerFileCoverageExceptions(true);
    break;
  case "--update":
    updatePerFileCoverageExceptions(false);
    break;
  default:
    runPerFileCoverageTest();
    break;
}
